<svg xmlns="http://www.w3.org/2000/svg" style="display: none">
  <symbol id="arrow" viewBox="0 0 16 16">
    <path fill-rule="evenodd"
      d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z" />
  </symbol>
  <symbol id="chat" fill="currentColor" viewBox="0 0 16 16">
 <path d="M16 8c0 3.866-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7M4.5 5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1zm0 2.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1zm0 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1z"/>
  </symbol>

  <symbol id="map" fill="currentColor" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.598-.49L10.5.99 5.598.01a.5.5 0 0 0-.196 0l-5 1A.5.5 0 0 0 0 1.5v14a.5.5 0 0 0 .598.49l4.902-.98 4.902.98a.5.5 0 0 0 .196 0l5-1A.5.5 0 0 0 16 14.5zM5 14.09V1.11l.5-.1.5.1v12.98l-.402-.08a.5.5 0 0 0-.196 0zm5 .8V1.91l.402.08a.5.5 0 0 0 .196 0L11 1.91v12.98l-.5.1z"/>
  </symbol>

  <symbol id="circle" viewBox="0 0 16 16">
    <circle cx="8" cy="8" r="2" />
  </symbol>

  <symbol id="notifictionBell" viewBox="0 0 16 16">
    <path
      d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z" />
  </symbol>

  <symbol id="profile" viewBox="0 0 16 16">
    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
    <path
      d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z" />
  </symbol>
  <symbol id="shoppingCart" viewBox="0 0 16 16">
    <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"/>
  </symbol>
</svg>

<nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light navbar-wrapper">
  <div class="container-fluid">
    <a matTooltip="Home" class="navbar-brand" [routerLink]="['home']">
      <img class="logo" src="../../../../assets/images/logo1.png" alt="#" />
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
      aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse d-flex justify-content-end" id="navbarNavDropdown" *ngIf="isOnLandingPage()">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" [routerLink]="['home']">
            <svg width="40" height="40">
              <use xlink:href="#arrow" />
            </svg>
          </a>
        </li>
      </ul>
    </div>
    <div class="collapse navbar-collapse" id="navbarNavDropdown" *ngIf="!isOnLandingPage()">
      <ul class="navbar-nav" *ngIf="user && user.username !== ''">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Tours
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <li *ngIf="user && user.role === 'tourist'" [routerLink]="['tours']">
              <a class="dropdown-item">Tours</a>
            </li>
            <li *ngIf="user && user.role === 'author'" [routerLink]="['tour']">
              <a class="dropdown-item">Tours</a>
            </li>
            <li *ngIf="user && user.role === 'tourist'" [routerLink]="['bought-tours']">
              <a class="dropdown-item">Purchased tours</a>
            </li>
            <li *ngIf="user && (user.role === 'tourist' || user.role === 'author')"
              [routerLink]="['reported-problems']">
              <a class="dropdown-item">Tour problems</a>
            </li>
            <li *ngIf="user && user.role === 'administrator'" [routerLink]="['tourProblems']">
              <a class="dropdown-item">Tour problems</a>
            </li>
            <li *ngIf="user && user.role === 'author'" [routerLink]="['bundle-view']">
              <a class="dropdown-item">Bundles</a>
            </li>
            <li *ngIf="user && user.role === 'author'" [routerLink]="['tour/overall-tour-statistics']">
              <a class="dropdown-item">Tour statistics</a>
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown" *ngIf="user && user.username !== ''">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Social
          </a>
          <ul class="dropdown-menu" aria-labelledby="socialDropdown">
            <li *ngIf="user && user.role === 'tourist'" [routerLink]="['club']">
              <a class="dropdown-item">Clubs</a>
            </li>
            <li *ngIf="user && (user.role === 'author' || user.role === 'tourist')" [routerLink]="['userProfiles']">
              <a class="dropdown-item">People</a>
            </li>
            <li *ngIf="user && (user.role === 'author' || user.role === 'tourist')" [routerLink]="['blogs-overview']">
              <a class="dropdown-item">Blog</a>
            </li>
            <li [routerLink]="['about-us']">
              <a class="dropdown-item">About us</a>
            </li>
            <li [routerLink]="['frequent-questions']">
              <a class="dropdown-item">FAQ</a>
            </li>
          </ul>
        </li>
        <li class="nav-item dropdown" *ngIf="user && user.username !== '' && user.role != 'author'">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            Encounters
          </a>
          <ul class="dropdown-menu" aria-labelledby="encountersDropdown">
            <li *ngIf="user && user.role === 'administrator'" [routerLink]="['challenges/-1000']">
              <a class="dropdown-item">Challenges</a>
            </li>
            <li *ngIf="user && user.role === 'tourist'" [routerLink]="['challenges-view']">
              <a class="dropdown-item">Explore</a>
            </li>
            <li *ngIf="user && user.role === 'tourist' && (userxp && userxp.level>9)" [routerLink]="['challenges/-1000']">
              <a class="dropdown-item">Create challenges</a>
            </li>
          </ul>
        </li>
      </ul>
      <ul class="navbar-nav ms-auto d-flex align-items-center justify-content-center">
        <li class="nav-item">

          <a class="nav-link" aria-current="page" *ngIf="user && (user.role === 'tourist')"
            [routerLink]="['cart-items']">
            <svg width="25" height="25" >
              <use xlink:href="#shoppingCart">
              </use>
            </svg>
            <span *ngIf="cartSize > 0" class="top-0 start-100 translate-middle badge rounded-pill bg-danger">
              {{cartSize}}
            </span>
          </a>
        </li>
        <div class="vr border border-1" *ngIf="user && user.role == 'tourist'"></div>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" *ngIf="user && user.username !== '' && user.role !== 'administrator'"
            [routerLink]="['messages']">
            <svg width="20" height="20">
              <use xlink:href="#chat" />
            </svg>
          </a>
        </li>
        <div class="vr border border-1" *ngIf="user && (user.role == 'tourist' || user.role == 'author')"></div>
        <li class="nav-item" >
          <div class="notifications d-inline-block" *ngIf="user && user.role !== 'administrator'">
            <div class="dropdown d-inline-block nav-btn" *ngIf="user && user.username !== ''">
              <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown"
                aria-expanded="false" (click)="removeBadge()">
                <svg class="notifiction-bell" width="20" height="20">
                  <use xlink:href="#notifictionBell" />
                </svg>
                <span *ngIf="hasNotifications" class="position-absolute top-5 start-50 translate-middle p-1 bg-danger border border-danger rounded-circle">
                  <span class="visually-hidden">.</span>
                </span>
              </a>

              <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuLink" id="notifications-ul"></ul>
            </div>
          </div>
        </li>
        <div class="vr border border-1" *ngIf="user && (user.role == 'tourist' || user.role == 'author')"></div>
        <li class="nav-item">
          <a class="nav-link" aria-current="page" *ngIf="user && user.username !== '' && user.role !== 'administrator'"
            [routerLink]="['map-view']">
            <svg width="25" height="25">
              <use xlink:href="#map" />
            </svg>
          </a>
        </li>
        <div class="vr border border-1" *ngIf="user && (user.role == 'tourist' || user.role == 'author')"></div>
        <li class="nav-item dropdown" *ngIf="user && user.username !== ''"  matTooltip="My Profile">
          <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown"
            aria-expanded="false">
            <svg class="profile-icon" width="25" height="25">
              <use xlink:href="#profile" />
            </svg>
          </a>
          <ul class="dropdown-menu dropdown-menu-end profile-dropdown" aria-labelledby="profileDropdown">
            <li *ngIf="user && (user.role === 'author' || user.role === 'tourist')" [routerLink]="['myProfile']">
              <a class="dropdown-item">My profile</a>
            </li>
            <li *ngIf="user && user.username !== ''" (click)="onLogout()">
              <a class="dropdown-item">Logout</a>
            </li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link sign-button" aria-current="page" *ngIf="(user && user.username === '') && (this.router.url !== '/login') && (this.router.url !== '/register')" [routerLink]="['login']">
            Log in
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link sign-button" aria-current="page" *ngIf="(user && user.username === '') && (this.router.url !== '/login') && (this.router.url !== '/register')" [routerLink]="['register']">
            Register
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
